---
import { storyblokEditable } from "@storyblok/astro";

const { blok } = Astro.props;
const project = blok.project?.[0];
const content = project.content;

if (!project) {
  throw new Error("Kein Projekt in FeaturedProject ausgewählt");
}

const isImgLeft = blok.image_left;
const layoutClass = isImgLeft ? "md:flex-row-reverse" : "md:flex-row";
---

<section class="py-20 bg-black text-white" {...storyblokEditable(blok)}>
  <div class={`max-w-7xl mx-auto px-4 md:px-8 flex flex-col ${layoutClass} items-center gap-12`}>
    
    <!-- Bild -->
    <div class="w-full md:w-1/2">
      <img
        src={content.thumbnail?.filename}
        alt={content.title}
        class="w-full rounded-lg shadow-lg object-cover"
      />
    </div>

    <!-- Textinhalt -->
    <div class="w-full md:w-1/2">
      <h2 class="text-4xl font-bold mb-2">{content.title}</h2>

      <!-- Zeitraum & Rolle -->
      <div class="text-sm text-zinc-400 mb-4">
        {content.timespan} • <span class="italic">{content.role}</span>
      </div>

      <!-- Pitch -->
      <p class="text-zinc-300 text-lg mb-4">{content.pitch}</p>

      <!-- Tags -->
      {content.tags?.length > 0 && (
        <div class="flex flex-wrap gap-2 mb-6">
          {content.tags.map((tag) => (
            <span
              class="text-xs font-medium px-3 py-1 rounded-full border border-purple-500 text-purple-300 bg-purple-900/10"
            >
              {tag.tag}
            </span>
          ))}
        </div>
      )}

      <!-- CTAs -->
      <div class="flex gap-4">
        <a
          href={`/projects/${project.slug}`}
          class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded transition font-medium"
        >
          Mehr erfahren →
        </a>
        <a
          href="/projects"
          class="border border-white hover:border-purple-500 hover:text-purple-400 text-white px-6 py-3 rounded transition font-medium"
        >
          Alle Projekte
        </a>
      </div>
    </div>
  </div>
</section>
